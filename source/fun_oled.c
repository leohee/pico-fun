
#include "inc_file.h"


#define DEV_I2C_OLED		(&i2c0_inst)
#define PIN_OLED_SCL		(21)
#define PIN_OLED_SDA		(20)

#define WIDTH_FONT_8x16		(16)

const uint8_t font_8x16[][16]=	  
{
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},	//  0
	{0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x30,0x00,0x00,0x00},	//! 1
	{0x00,0x10,0x0C,0x06,0x10,0x0C,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},	//" 2
	{0x40,0xC0,0x78,0x40,0xC0,0x78,0x40,0x00,0x04,0x3F,0x04,0x04,0x3F,0x04,0x04,0x00},	//# 3
	{0x00,0x70,0x88,0xFC,0x08,0x30,0x00,0x00,0x00,0x18,0x20,0xFF,0x21,0x1E,0x00,0x00},	//$ 4
	{0xF0,0x08,0xF0,0x00,0xE0,0x18,0x00,0x00,0x00,0x21,0x1C,0x03,0x1E,0x21,0x1E,0x00},	//% 5
	{0x00,0xF0,0x08,0x88,0x70,0x00,0x00,0x00,0x1E,0x21,0x23,0x24,0x19,0x27,0x21,0x10},	//& 6
	{0x10,0x16,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},	//' 7
	{0x00,0x00,0x00,0xE0,0x18,0x04,0x02,0x00,0x00,0x00,0x00,0x07,0x18,0x20,0x40,0x00},	//( 8
	{0x00,0x02,0x04,0x18,0xE0,0x00,0x00,0x00,0x00,0x40,0x20,0x18,0x07,0x00,0x00,0x00},	//) 9
	{0x40,0x40,0x80,0xF0,0x80,0x40,0x40,0x00,0x02,0x02,0x01,0x0F,0x01,0x02,0x02,0x00},	//* 10
	{0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x1F,0x01,0x01,0x01,0x00},	//+ 11
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xB0,0x70,0x00,0x00,0x00,0x00,0x00},	//, 12
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01},	//- 13
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00},	//. 14
	{0x00,0x00,0x00,0x00,0x80,0x60,0x18,0x04,0x00,0x60,0x18,0x06,0x01,0x00,0x00,0x00},	/// 15
	{0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00},	//0 16
	{0x00,0x10,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00},	//1 17
	{0x00,0x70,0x08,0x08,0x08,0x88,0x70,0x00,0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00},	//2 18
	{0x00,0x30,0x08,0x88,0x88,0x48,0x30,0x00,0x00,0x18,0x20,0x20,0x20,0x11,0x0E,0x00},	//3 19
	{0x00,0x00,0xC0,0x20,0x10,0xF8,0x00,0x00,0x00,0x07,0x04,0x24,0x24,0x3F,0x24,0x00},	//4 20
	{0x00,0xF8,0x08,0x88,0x88,0x08,0x08,0x00,0x00,0x19,0x21,0x20,0x20,0x11,0x0E,0x00},	//5 21
	{0x00,0xE0,0x10,0x88,0x88,0x18,0x00,0x00,0x00,0x0F,0x11,0x20,0x20,0x11,0x0E,0x00},	//6 22
	{0x00,0x38,0x08,0x08,0xC8,0x38,0x08,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00},	//7 23
	{0x00,0x70,0x88,0x08,0x08,0x88,0x70,0x00,0x00,0x1C,0x22,0x21,0x21,0x22,0x1C,0x00},	//8 24
	{0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x00,0x31,0x22,0x22,0x11,0x0F,0x00},	//9 25
	{0x00,0x00,0x00,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00},	//: 26
	{0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x60,0x00,0x00,0x00,0x00},	//; 27
	{0x00,0x00,0x80,0x40,0x20,0x10,0x08,0x00,0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x00},	//< 28
	{0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00},	//= 29
	{0x00,0x08,0x10,0x20,0x40,0x80,0x00,0x00,0x00,0x20,0x10,0x08,0x04,0x02,0x01,0x00},	//> 30
	{0x00,0x70,0x48,0x08,0x08,0x08,0xF0,0x00,0x00,0x00,0x00,0x30,0x36,0x01,0x00,0x00},	//? 31
	{0xC0,0x30,0xC8,0x28,0xE8,0x10,0xE0,0x00,0x07,0x18,0x27,0x24,0x23,0x14,0x0B,0x00},	//@ 32
	{0x00,0x00,0xC0,0x38,0xE0,0x00,0x00,0x00,0x20,0x3C,0x23,0x02,0x02,0x27,0x38,0x20},	//A 33
	{0x08,0xF8,0x88,0x88,0x88,0x70,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x11,0x0E,0x00},	//B 34
	{0xC0,0x30,0x08,0x08,0x08,0x08,0x38,0x00,0x07,0x18,0x20,0x20,0x20,0x10,0x08,0x00},	//C 35
	{0x08,0xF8,0x08,0x08,0x08,0x10,0xE0,0x00,0x20,0x3F,0x20,0x20,0x20,0x10,0x0F,0x00},	//D 36
	{0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x20,0x23,0x20,0x18,0x00},	//E 37
	{0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x00,0x03,0x00,0x00,0x00},	//F 38
	{0xC0,0x30,0x08,0x08,0x08,0x38,0x00,0x00,0x07,0x18,0x20,0x20,0x22,0x1E,0x02,0x00},	//G 39
	{0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x20,0x3F,0x21,0x01,0x01,0x21,0x3F,0x20},	//H 40
	{0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00},	//I 41
	{0x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,0x00},	//J 42
	{0x08,0xF8,0x88,0xC0,0x28,0x18,0x08,0x00,0x20,0x3F,0x20,0x01,0x26,0x38,0x20,0x00},	//K 43
	{0x08,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x20,0x30,0x00},	//L 44
	{0x08,0xF8,0xF8,0x00,0xF8,0xF8,0x08,0x00,0x20,0x3F,0x00,0x3F,0x00,0x3F,0x20,0x00},	//M 45
	{0x08,0xF8,0x30,0xC0,0x00,0x08,0xF8,0x08,0x20,0x3F,0x20,0x00,0x07,0x18,0x3F,0x00},	//N 46
	{0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x10,0x20,0x20,0x20,0x10,0x0F,0x00},	//O 47
	{0x08,0xF8,0x08,0x08,0x08,0x08,0xF0,0x00,0x20,0x3F,0x21,0x01,0x01,0x01,0x00,0x00},	//P 48
	{0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x18,0x24,0x24,0x38,0x50,0x4F,0x00},	//Q 49
	{0x08,0xF8,0x88,0x88,0x88,0x88,0x70,0x00,0x20,0x3F,0x20,0x00,0x03,0x0C,0x30,0x20},	//R 50
	{0x00,0x70,0x88,0x08,0x08,0x08,0x38,0x00,0x00,0x38,0x20,0x21,0x21,0x22,0x1C,0x00},	//S 51
	{0x18,0x08,0x08,0xF8,0x08,0x08,0x18,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00},	//T 52
	{0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00},	//U 53
	{0x08,0x78,0x88,0x00,0x00,0xC8,0x38,0x08,0x00,0x00,0x07,0x38,0x0E,0x01,0x00,0x00},	//V 54
	{0xF8,0x08,0x00,0xF8,0x00,0x08,0xF8,0x00,0x03,0x3C,0x07,0x00,0x07,0x3C,0x03,0x00},	//W 55
	{0x08,0x18,0x68,0x80,0x80,0x68,0x18,0x08,0x20,0x30,0x2C,0x03,0x03,0x2C,0x30,0x20},	//X 56
	{0x08,0x38,0xC8,0x00,0xC8,0x38,0x08,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00},	//Y 57
	{0x10,0x08,0x08,0x08,0xC8,0x38,0x08,0x00,0x20,0x38,0x26,0x21,0x20,0x20,0x18,0x00},	//Z 58
	{0x00,0x00,0x00,0xFE,0x02,0x02,0x02,0x00,0x00,0x00,0x00,0x7F,0x40,0x40,0x40,0x00},	//[ 59
	{0x00,0x0C,0x30,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x06,0x38,0xC0,0x00},	//\ 60
	{0x00,0x02,0x02,0x02,0xFE,0x00,0x00,0x00,0x00,0x40,0x40,0x40,0x7F,0x00,0x00,0x00},	//] 61
	{0x00,0x00,0x04,0x02,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},	//^ 62
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80},	//_ 63
	{0x00,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},	//` 64
	{0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x19,0x24,0x22,0x22,0x22,0x3F,0x20},	//a 65
	{0x08,0xF8,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x3F,0x11,0x20,0x20,0x11,0x0E,0x00},	//b 66
	{0x00,0x00,0x00,0x80,0x80,0x80,0x00,0x00,0x00,0x0E,0x11,0x20,0x20,0x20,0x11,0x00},	//c 67
	{0x00,0x00,0x00,0x80,0x80,0x88,0xF8,0x00,0x00,0x0E,0x11,0x20,0x20,0x10,0x3F,0x20},	//d 68
	{0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x22,0x22,0x22,0x22,0x13,0x00},	//e 69
	{0x00,0x80,0x80,0xF0,0x88,0x88,0x88,0x18,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00},	//f 70
	{0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x6B,0x94,0x94,0x94,0x93,0x60,0x00},	//g 71
	{0x08,0xF8,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20},	//h 72
	{0x00,0x80,0x98,0x98,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00},	//i 73
	{0x00,0x00,0x00,0x80,0x98,0x98,0x00,0x00,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00},	//j 74
	{0x08,0xF8,0x00,0x00,0x80,0x80,0x80,0x00,0x20,0x3F,0x24,0x02,0x2D,0x30,0x20,0x00},	//k 75
	{0x00,0x08,0x08,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00},	//l 76
	{0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x20,0x3F,0x20,0x00,0x3F,0x20,0x00,0x3F},	//m 77
	{0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20},	//n 78
	{0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00},	//o 79
	{0x80,0x80,0x00,0x80,0x80,0x00,0x00,0x00,0x80,0xFF,0xA1,0x20,0x20,0x11,0x0E,0x00},	//p 80
	{0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x0E,0x11,0x20,0x20,0xA0,0xFF,0x80},	//q 81
	{0x80,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x20,0x20,0x3F,0x21,0x20,0x00,0x01,0x00},	//r 82
	{0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x33,0x24,0x24,0x24,0x24,0x19,0x00},	//s 83
	{0x00,0x80,0x80,0xE0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x1F,0x20,0x20,0x00,0x00},	//t 84
	{0x80,0x80,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x1F,0x20,0x20,0x20,0x10,0x3F,0x20},	//u 85
	{0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x00,0x01,0x0E,0x30,0x08,0x06,0x01,0x00},	//v 86
	{0x80,0x80,0x00,0x80,0x00,0x80,0x80,0x80,0x0F,0x30,0x0C,0x03,0x0C,0x30,0x0F,0x00},	//w 87
	{0x00,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x31,0x2E,0x0E,0x31,0x20,0x00},	//x 88
	{0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x80,0x81,0x8E,0x70,0x18,0x06,0x01,0x00},	//y 89
	{0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x21,0x30,0x2C,0x22,0x21,0x30,0x00},	//z 90
	{0x00,0x00,0x00,0x00,0x80,0x7C,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x3F,0x40,0x40},	//{ 91
	{0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00},	//| 92
	{0x00,0x02,0x02,0x7C,0x80,0x00,0x00,0x00,0x00,0x40,0x40,0x3F,0x00,0x00,0x00,0x00},	//} 93
	{0x00,0x06,0x01,0x01,0x02,0x02,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},	//~ 94
};

#define WIDTH_FONT_8x6		(6)

const uint8_t font_8x6[][WIDTH_FONT_8x6] = {
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00},	// sp
	{0x00, 0x00, 0x00, 0x2f, 0x00, 0x00},	// !
	{0x00, 0x00, 0x07, 0x00, 0x07, 0x00},	// "
	{0x00, 0x14, 0x7f, 0x14, 0x7f, 0x14},	// #
	{0x00, 0x24, 0x2a, 0x7f, 0x2a, 0x12},	// $
	{0x00, 0x62, 0x64, 0x08, 0x13, 0x23},	// %
	{0x00, 0x36, 0x49, 0x55, 0x22, 0x50},	// &
	{0x00, 0x00, 0x05, 0x03, 0x00, 0x00},	// '
	{0x00, 0x00, 0x1c, 0x22, 0x41, 0x00},	// (
	{0x00, 0x00, 0x41, 0x22, 0x1c, 0x00},	// )
	{0x00, 0x14, 0x08, 0x3E, 0x08, 0x14},	// *
	{0x00, 0x08, 0x08, 0x3E, 0x08, 0x08},	// +
	{0x00, 0x00, 0x00, 0xA0, 0x60, 0x00},	// ,
	{0x00, 0x08, 0x08, 0x08, 0x08, 0x08},	// -
	{0x00, 0x00, 0x60, 0x60, 0x00, 0x00},	// .
	{0x00, 0x20, 0x10, 0x08, 0x04, 0x02},	// /
	{0x00, 0x3E, 0x51, 0x49, 0x45, 0x3E},	// 0
	{0x00, 0x00, 0x42, 0x7F, 0x40, 0x00},	// 1
	{0x00, 0x42, 0x61, 0x51, 0x49, 0x46},	// 2
	{0x00, 0x21, 0x41, 0x45, 0x4B, 0x31},	// 3
	{0x00, 0x18, 0x14, 0x12, 0x7F, 0x10},	// 4
	{0x00, 0x27, 0x45, 0x45, 0x45, 0x39},	// 5
	{0x00, 0x3C, 0x4A, 0x49, 0x49, 0x30},	// 6
	{0x00, 0x01, 0x71, 0x09, 0x05, 0x03},	// 7
	{0x00, 0x36, 0x49, 0x49, 0x49, 0x36},	// 8
	{0x00, 0x06, 0x49, 0x49, 0x29, 0x1E},	// 9
	{0x00, 0x00, 0x36, 0x36, 0x00, 0x00},	// :
	{0x00, 0x00, 0x56, 0x36, 0x00, 0x00},	// ;
	{0x00, 0x08, 0x14, 0x22, 0x41, 0x00},	// <
	{0x00, 0x14, 0x14, 0x14, 0x14, 0x14},	// =
	{0x00, 0x00, 0x41, 0x22, 0x14, 0x08},	// >
	{0x00, 0x02, 0x01, 0x51, 0x09, 0x06},	// ?
	{0x00, 0x32, 0x49, 0x59, 0x51, 0x3E},	// @
	{0x00, 0x7C, 0x12, 0x11, 0x12, 0x7C},	// A
	{0x00, 0x7F, 0x49, 0x49, 0x49, 0x36},	// B
	{0x00, 0x3E, 0x41, 0x41, 0x41, 0x22},	// C
	{0x00, 0x7F, 0x41, 0x41, 0x22, 0x1C},	// D
	{0x00, 0x7F, 0x49, 0x49, 0x49, 0x41},	// E
	{0x00, 0x7F, 0x09, 0x09, 0x09, 0x01},	// F
	{0x00, 0x3E, 0x41, 0x49, 0x49, 0x7A},	// G
	{0x00, 0x7F, 0x08, 0x08, 0x08, 0x7F},	// H
	{0x00, 0x00, 0x41, 0x7F, 0x41, 0x00},	// I
	{0x00, 0x20, 0x40, 0x41, 0x3F, 0x01},	// J
	{0x00, 0x7F, 0x08, 0x14, 0x22, 0x41},	// K
	{0x00, 0x7F, 0x40, 0x40, 0x40, 0x40},	// L
	{0x00, 0x7F, 0x02, 0x0C, 0x02, 0x7F},	// M
	{0x00, 0x7F, 0x04, 0x08, 0x10, 0x7F},	// N
	{0x00, 0x3E, 0x41, 0x41, 0x41, 0x3E},	// O
	{0x00, 0x7F, 0x09, 0x09, 0x09, 0x06},	// P
	{0x00, 0x3E, 0x41, 0x51, 0x21, 0x5E},	// Q
	{0x00, 0x7F, 0x09, 0x19, 0x29, 0x46},	// R
	{0x00, 0x46, 0x49, 0x49, 0x49, 0x31},	// S
	{0x00, 0x01, 0x01, 0x7F, 0x01, 0x01},	// T
	{0x00, 0x3F, 0x40, 0x40, 0x40, 0x3F},	// U
	{0x00, 0x1F, 0x20, 0x40, 0x20, 0x1F},	// V
	{0x00, 0x3F, 0x40, 0x38, 0x40, 0x3F},	// W
	{0x00, 0x63, 0x14, 0x08, 0x14, 0x63},	// X
	{0x00, 0x07, 0x08, 0x70, 0x08, 0x07},	// Y
	{0x00, 0x61, 0x51, 0x49, 0x45, 0x43},	// Z
	{0x00, 0x00, 0x7F, 0x41, 0x41, 0x00},	// [
	{0x00, 0x55, 0x2A, 0x55, 0x2A, 0x55},	// 55
	{0x00, 0x00, 0x41, 0x41, 0x7F, 0x00},	// ]
	{0x00, 0x04, 0x02, 0x01, 0x02, 0x04},	// ^
	{0x00, 0x40, 0x40, 0x40, 0x40, 0x40},	// _
	{0x00, 0x00, 0x01, 0x02, 0x04, 0x00},	// '
	{0x00, 0x20, 0x54, 0x54, 0x54, 0x78},	// a
	{0x00, 0x7F, 0x48, 0x44, 0x44, 0x38},	// b
	{0x00, 0x38, 0x44, 0x44, 0x44, 0x20},	// c
	{0x00, 0x38, 0x44, 0x44, 0x48, 0x7F},	// d
	{0x00, 0x38, 0x54, 0x54, 0x54, 0x18},	// e
	{0x00, 0x08, 0x7E, 0x09, 0x01, 0x02},	// f
	{0x00, 0x18, 0xA4, 0xA4, 0xA4, 0x7C},	// g
	{0x00, 0x7F, 0x08, 0x04, 0x04, 0x78},	// h
	{0x00, 0x00, 0x44, 0x7D, 0x40, 0x00},	// i
	{0x00, 0x40, 0x80, 0x84, 0x7D, 0x00},	// j
	{0x00, 0x7F, 0x10, 0x28, 0x44, 0x00},	// k
	{0x00, 0x00, 0x41, 0x7F, 0x40, 0x00},	// l
	{0x00, 0x7C, 0x04, 0x18, 0x04, 0x78},	// m
	{0x00, 0x7C, 0x08, 0x04, 0x04, 0x78},	// n
	{0x00, 0x38, 0x44, 0x44, 0x44, 0x38},	// o
	{0x00, 0xFC, 0x24, 0x24, 0x24, 0x18},	// p
	{0x00, 0x18, 0x24, 0x24, 0x18, 0xFC},	// q
	{0x00, 0x7C, 0x08, 0x04, 0x04, 0x08},	// r
	{0x00, 0x48, 0x54, 0x54, 0x54, 0x20},	// s
	{0x00, 0x04, 0x3F, 0x44, 0x40, 0x20},	// t
	{0x00, 0x3C, 0x40, 0x40, 0x20, 0x7C},	// u
	{0x00, 0x1C, 0x20, 0x40, 0x20, 0x1C},	// v
	{0x00, 0x3C, 0x40, 0x30, 0x40, 0x3C},	// w
	{0x00, 0x44, 0x28, 0x10, 0x28, 0x44},	// x
	{0x00, 0x1C, 0xA0, 0xA0, 0xA0, 0x7C},	// y
	{0x00, 0x44, 0x64, 0x54, 0x4C, 0x44},	// z
	{0x14, 0x14, 0x14, 0x14, 0x14, 0x14},	// horiz lines
};

static void fill (uint8_t *buf, uint8_t fill)
{
	int i = 0;

    // fill entire buffer with the same byte
    for (i = 0; i < OLED_BUF_LEN; i++) {
        buf[i] = fill;
    }
};

void fill_page (uint8_t *buf, uint8_t fill, uint8_t page)
{
    // fill entire page with the same byte
    memset(buf + (page * OLED_WIDTH), fill, OLED_WIDTH);
};

// convenience methods for printing out a buffer to be rendered
// mostly useful for debugging images, patterns, etc
static void print_buf_page (uint8_t *buf, uint8_t page)
{
	int j = 0, k = 0;

    // prints one page of a full length (128x4) buffer
    for (j = 0; j < OLED_PAGE_HEIGHT; j++) {
        for (k = 0; k < OLED_WIDTH; k++) {
            printf("%u", (buf[page * OLED_WIDTH + k] >> j) & 0x01);
        }
        printf("\n");
    }
}

void print_buf_pages (uint8_t *buf)
{
	int i = 0;

    // prints all pages of a full length buffer
    for (i = 0; i < OLED_NUM_PAGES; i++) {
        printf("--page %d--\n", i);
        print_buf_page(buf, i);
    }
}

void print_buf_area (uint8_t *buf, struct render_area *area)
{
	int i = 0, j = 0, k = 0;

    // print a render area of generic size
    int area_width = area->end_col - area->start_col + 1;
    int area_height = area->end_page - area->start_page + 1; // in pages, not pixels

    for (i = 0; i < area_height; i++) {
        for (j = 0; j < OLED_PAGE_HEIGHT; j++) {
            for (k = 0; k < area_width; k++) {
                printf("%u", (buf[i * area_width + k] >> j) & 0x01);
            }
            printf("\n");
        }
    }
}

void calc_render_area_buflen (struct render_area *area)
{
    // calculate how long the flattened buffer will be for a render area
    area->buflen = (area->end_col - area->start_col + 1) * (area->end_page - area->start_page + 1);
}

void oled_send_cmd (uint8_t cmd)
{
    // I2C write process expects a control byte followed by data
    // this "data" can be a command or data to follow up a command

    // Co = 1, D/C = 0 => the driver expects a command
    uint8_t buf[2] = {0x80, cmd};
    i2c_write_blocking(DEV_I2C_OLED, (OLED_ADDR & OLED_WRITE_MODE), buf, 2, false);
}

void oled_send_buf (uint8_t *buf, int buflen)
{
    // in horizontal addressing mode, the column address pointer auto-increments
    // and then wraps around to the next page, so we can send the entire frame
    // buffer in one gooooooo!

    // copy our frame buffer into a new buffer because we need to add the control byte
    // to the beginning

    // TODO find a more memory-efficient way to do this..
    // maybe break the data transfer into pages?

	int i = 1;
    uint8_t *temp_buf = malloc(buflen + 1);
	if (NULL != temp_buf) {
		memset(temp_buf, 0, buflen+1);

	    for (i = 1; i < buflen + 1; i++) {
	        temp_buf[i] = buf[i - 1];
	    }

	    // Co = 0, D/C = 1 => the driver expects data to be written to RAM
	    temp_buf[0] = 0x40;
	    i2c_write_blocking(DEV_I2C_OLED, (OLED_ADDR & OLED_WRITE_MODE), temp_buf, buflen + 1, false);

	    free(temp_buf);
	}
}

void oled_init_param (void)
{
    // some of these commands are not strictly necessary as the reset
    // process defaults to some of these but they are shown here
    // to demonstrate what the initialization sequence looks like

    // some configuration values are recommended by the board manufacturer

    oled_send_cmd(OLED_SET_DISP | 0x00); // set display off

    /* memory mapping */
    oled_send_cmd(OLED_SET_MEM_ADDR); // set memory address mode
    oled_send_cmd(0x00); // horizontal addressing mode

    /* resolution and layout */
    oled_send_cmd(OLED_SET_DISP_START_LINE); // set display start line to 0

    oled_send_cmd(OLED_SET_SEG_REMAP | 0x01); // set segment re-map
    // column address 127 is mapped to SEG0

    oled_send_cmd(OLED_SET_MUX_RATIO); // set multiplex ratio
    oled_send_cmd(OLED_HEIGHT - 1); // our display is only 32 pixels high

    oled_send_cmd(OLED_SET_COM_OUT_DIR | 0x08); // set COM (common) output scan direction
    // scan from bottom up, COM[N-1] to COM0

    oled_send_cmd(OLED_SET_DISP_OFFSET); // set display offset
    oled_send_cmd(0x00); // no offset

    oled_send_cmd(OLED_SET_COM_PIN_CFG); // set COM (common) pins hardware configuration
    oled_send_cmd(0x02); // manufacturer magic number

    /* timing and driving scheme */
    oled_send_cmd(OLED_SET_DISP_CLK_DIV); // set display clock divide ratio
    oled_send_cmd(0x80); // div ratio of 1, standard freq

    oled_send_cmd(OLED_SET_PRECHARGE); // set pre-charge period
    oled_send_cmd(0xF1); // Vcc internally generated on our board

    oled_send_cmd(OLED_SET_VCOM_DESEL); // set VCOMH deselect level
    oled_send_cmd(0x30); // 0.83xVcc

    /* display */
    oled_send_cmd(OLED_SET_CONTRAST); // set contrast control
    oled_send_cmd(0xFF);

    oled_send_cmd(OLED_SET_ENTIRE_ON); // set entire display on to follow RAM content

    oled_send_cmd(OLED_SET_NORM_INV); // set normal (not inverted) display

    oled_send_cmd(OLED_SET_CHARGE_PUMP); // set charge pump
    oled_send_cmd(0x14); // Vcc internally generated on our board

    oled_send_cmd(OLED_SET_SCROLL | 0x00); // deactivate horizontal scrolling if set
    // this is necessary as memory writes will corrupt if scrolling was enabled

    oled_send_cmd(OLED_SET_DISP | 0x01); // turn display on
}

void render (uint8_t *buf, struct render_area *area)
{
    // update a portion of the display with a render area
    oled_send_cmd(OLED_SET_COL_ADDR);
    oled_send_cmd(area->start_col);
    oled_send_cmd(area->end_col);

    oled_send_cmd(OLED_SET_PAGE_ADDR);
    oled_send_cmd(area->start_page);
    oled_send_cmd(area->end_page);

    oled_send_buf(buf, area->buflen);
}

void oled_string (char *str, uint8_t *buf)
{
	int i = 0, j = 0;
	uint8_t ch = 0;

	while (str[i] != '\0') {
		ch = str[i] - ' ';
		for (j = 0; j < WIDTH_FONT_8x6; j++) {
			buf[i*WIDTH_FONT_8x6+j] = font_8x6[ch][j];
		}
	}
}

void oled_ori_scroll (uint8_t page, uint8_t speed)
{
	if ((page < OLED_NUM_PAGES)&&(speed < 10)) {
	    oled_send_cmd(OLED_SET_HORIZ_SCROLL | 0x00);
	    oled_send_cmd(0x00); // dummy byte
	    oled_send_cmd(page); // start page 0
	    oled_send_cmd(speed); // time interval
	    oled_send_cmd(page); // end page 3
	    oled_send_cmd(0x00); // dummy byte
	    oled_send_cmd(0xFF); // dummy byte

	    // let's goooo!
	    oled_send_cmd(OLED_SET_SCROLL | 0x01);

		printf("scroll page %d at %d\n", page, speed);
	}


}

int fun_oled_init (void)
{
    i2c_init(DEV_I2C_OLED, 400 * 1000);
    gpio_set_function(PIN_OLED_SDA, GPIO_FUNC_I2C);
    gpio_set_function(PIN_OLED_SCL, GPIO_FUNC_I2C);
    gpio_pull_up(PIN_OLED_SDA);
    gpio_pull_up(PIN_OLED_SCL);

    oled_init_param();

    // initialize render area for entire frame (128 pixels by 4 pages)
    struct render_area frame_area = {
    	start_col: 0,
		end_col : OLED_WIDTH - 1,
		start_page : 0,
		end_page : OLED_NUM_PAGES - 1};

    calc_render_area_buflen(&frame_area);

    // zero the entire display
    uint8_t buf[OLED_BUF_LEN] = {0x00};
	memset(buf, 0, OLED_BUF_LEN);

    render(buf, &frame_area);

    oled_send_cmd(0xA5); // ignore RAM, all pixels on
    sleep_ms(500);
    oled_send_cmd(0xA4); // go back to following RAM
    sleep_ms(500);

    struct render_area frame_area2 = {
    	start_col: 1,
		end_col : OLED_WIDTH - 2,
		start_page : 0,
		end_page : OLED_NUM_PAGES - 1};
	calc_render_area_buflen(&frame_area2);

	render(ascii, &frame_area2);

	//print_buf_pages(ascii);

    return 0;
}


